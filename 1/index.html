<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>五子棋</title>
        <link href="index.css" rel="stylesheet">
        <script src="index.js" type="text/javascript"></script>
    </head>
    <body>
        <h3 class="title">--五子棋--</h3>
        <canvas class="chess" width="450px" height="450px"></canvas>
        <div>
            <a class="restart">重新开始</a>
        </div>
    </body>

    <script>
        var chess = document.getElementsByClassName("chess")[0];
        var title = document.getElementsByClassName("title")[0];
        var context = chess.getContext("2d");
        context.strokeStyle="#B9B9B9"

        window.onload=function(){
            drawChessBoard();
        }
        function drawChessBoard(){
            for(var i=0;i<15;i++){
                context.moveTo(15,15 + i * 30);
                context.lineTo(435,15 + i * 30);
                context.stroke();

                context.moveTo(15 + i * 30 ,15);
                context.lineTo(15 + i * 30 ,435);
                context.stroke();

            }

        }
        


        var wins=[];
        for(var i=0;i<15;i++){
            wins[i]=[];
            for(var j=0;j<15;j++){
                wins[i][j]=[]
            }
        }
        var count = 0;
		for(var i=0;i<15;i++){
			for(var j=0;j<11;j++){
				for(var k=0;k<5;k++){
					wins[j+k][i][count]=true;
				}
				
				count++;
			}
			
		}

        for(var i=0;i<15;i++){
            for(var j=0;j<11;j++){
                for(var k=0;k<5;k++){
                    wins[i][j+k][count]=true;
                }
                count++
            }
        }

        for(var i=0;i<11;i++){
            for(var j=0;j<11;j++){
                for(var k=0;k<5;k++){
                    wins[i+k][j+k][count]=true
                }
                count++
            }
        }

		for(var i=0;i<11;i++){
			for(var j=14;j>3;j--){
				for(var k=0;k<5;k++){
					wins[i+k][j-k][count]=true;
				}
				count++;
			}
		}

        var chessboard=[]
        for(var i=0;i<15;i++){
            chessboard[i]=[];
            for(var j=0;j<15;j++){
                chessboard[i][j]=0;
            }
        }

        var me = true;//标记人1是否可以下棋
        var over = false;//标记游戏是否结束

        var myWin=[];//记录用户在嬴法上的分值
        for(var i=0;i<count;i++){
            myWin[i]=0;
        }


        var player1 = true;//玩家1标志
        var player2 = false; // 玩家2标志
        
        chess.onclick=function(e){
            //如果游戏结束不可以下棋
            if(over){
                return;
            }
            //判断人是否可以下棋
            if (player1 && !me) {
                return;
            } else if (player2 && me) {
                return;
            } 

            var x = e.offsetX;

            var y = e.offsetY;
            
            var i = Math.floor(x/30)
            var j = Math.floor(y/30)

            if(chessboard[i][j] === 0){
                //下一个子
                oneStep(i,j,me);
                //标记已落子
                chessboard[i][j]=me ? 1 : 2;

                if (me && player1) {
                    // 玩家1下完棋后，切换到玩家2
                    me = false;
                } else if (!me && player2) {
                    // 玩家2下完棋后，切换到玩家1
                    me = true;
                }

                // 检查胜利条件
                checkWin(i, j, me);
                // for(var k=0;k<count;k++){

                //     if(wins[i][j][k]){
                //         myWin[k]++;

                //         if(myWin[k]==5){

                //             title.innerHTML="恭喜你获胜了"
                //             over=true;
                //         }
                //     }

                // }
            }
        }

        function oneStep(i,j,me){
            context.beginPath();

            context.arc(15+i*30,15+j*30,13,0,2*Math.PI)//画圆


            context.closePath();

            
            var color;
            if(me){
                color = "black";
            }
            else{
                color = "red";
            }
            context.fillStyle=color;
            context.fill();

        }    
        function checkWin(row, col, color) {
        // 检查胜利条件的逻辑
        // ...
        }



    </script>

</html>